# 游戏积分板系统 (Game Scoreboard)

一个用 Rust 编写的命令行游戏积分板工具，用于管理多人游戏的积分统计。

## 功能特性

- 🎮 **玩家管理**：支持录入多个玩家，自动分配序号
- 📊 **积分计算**：胜出玩家+1分，其他玩家-1分
- 🖥️ **交互界面**：友好的中文命令行界面
- 📈 **实时统计**：实时显示积分榜和玩家列表
- ✅ **错误处理**：完善的输入验证和错误提示
- 🔒 **安全防护**：防止程序崩溃的输入验证机制
- 🛡️ **输入过滤**：自动过滤非法字符和过长输入

## 安装要求

- Rust 1.70+ 
- Cargo 包管理器

## 快速开始

### 1. 克隆项目

```bash
git clone <repository-url>
cd scoreboard
```

### 2. 编译运行

```bash
cargo run
```

### 3. 使用说明

#### 步骤一：录入玩家
程序启动后，首先需要录入所有参与游戏的玩家：

```
请输入玩家名称（输入 'done' 完成录入）: 张三
玩家 '张三' 已添加，序号为: 1
请输入玩家名称（输入 'done' 完成录入）: 李四
玩家 '李四' 已添加，序号为: 2
请输入玩家名称（输入 'done' 完成录入）: done
```

#### 步骤二：游戏操作
录入完成后，可以选择以下操作：

1. **记录游戏结果**：输入胜出玩家的序号
2. **查看积分榜**：显示所有玩家的当前积分
3. **查看玩家列表**：显示所有玩家的序号和姓名
4. **退出程序**：结束程序运行

## 积分规则

- 所有玩家初始积分为 **0分**
- 每局游戏结束后（通杀机制）：
  - 胜出玩家：**+N分**（N为其他玩家数量）
  - 其他玩家：**-1分**

### 积分计算示例
- 4人游戏：胜出玩家 +3分，其他3人各 -1分
- 3人游戏：胜出玩家 +2分，其他2人各 -1分
- 2人游戏：胜出玩家 +1分，另1人 -1分

## 安全特性

### 输入验证
- **长度限制**：玩家名称最多20字符，一般输入最多50字符
- **字符过滤**：自动拒绝包含控制字符（\n, \t, \r等）的输入
- **重复检查**：防止添加同名玩家
- **数字验证**：严格验证玩家序号输入，只接受正整数
- **范围检查**：玩家序号必须在合理范围内（1-1000）

### 错误处理
- **输入流保护**：处理EOF、输入中断等异常情况
- **优雅降级**：输入错误时提供清晰的错误信息和重试机会
- **程序稳定性**：防止因非法输入导致的程序崩溃
- **自动恢复**：大部分错误情况下程序可以自动恢复并继续运行

### 异常情况处理
- **空输入检测**：自动检测并拒绝空输入
- **格式验证**：确保数字输入格式正确
- **边界检查**：防止数组越界和内存访问错误
- **资源保护**：安全的内存管理和资源释放

## 示例输出

### 积分榜显示
```
=== 积分榜 ===
序号   玩家名称            积分
------------------------------
1    张三              2
2    李四              -1
3    王五              -1
```

### 玩家列表显示
```
=== 玩家列表 ===
1: 张三
2: 李四
3: 王五
```

## 项目结构

```
scoreboard/
├── Cargo.toml          # 项目配置文件
├── Cargo.lock          # 依赖锁定文件
├── README.md           # 项目说明文档
└── src/
    └── main.rs         # 主程序文件
```

## 技术实现

- **语言**：Rust
- **数据结构**：HashMap 存储玩家信息和积分
- **用户交互**：标准输入输出 (stdin/stdout)
- **错误处理**：Result 类型进行错误管理

## 核心组件

### Scoreboard 结构体
- `players`: 存储玩家序号和姓名的映射
- `scores`: 存储玩家序号和积分的映射
- `next_id`: 下一个可用的玩家序号

### 主要方法
- `add_player()`: 添加新玩家
- `update_scores()`: 更新游戏结果
- `display_scoreboard()`: 显示积分榜
- `list_players()`: 显示玩家列表

## 开发

### 编译
```bash
cargo build
```

### 运行测试
```bash
cargo test
```

### 发布版本
```bash
cargo build --release
```

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

## 许可证

本项目采用 MIT 许可证。详见 LICENSE 文件。

---

**享受游戏，记录每一次胜利！** 🎉